import{r as m}from"./stimulus-helpers-d189GC1Y-1.js";import{E as o}from"./ez-base-controller-CGJ-YSBe-1.js";import{e as c}from"./events-BT2vjsWp-1.js";import{t as u}from"./helpers-Dn-NBgOc-1.js";import h from"./ez-form-select-field-controller-CDr7eFjj-1.js";import{E as p}from"./modal-controller-DosV-HSM-1.js";import"./performance-helpers-DpsuwFL7-1.js";import"./js-Cz0CWeBA-1.js";import"./init-user-c_pBoS7M-1.js";import"./ez-custom-events-C2ZPNiPb-1.js";import"./rails-ujs-CTRE4yuG-1.js";import"./_commonjsHelpers-BosuxZz1-1.js";class L extends o{preventButtonDefault(e){e.preventDefault()}delayedSpinner(){setTimeout(()=>{requestAnimationFrame(()=>{this.element.classList.add("is-loading")})},0)}}const a=class a extends o{constructor(){super(...arguments),this.blurSubMenu=e=>{this.element.contains(e.target)||this.closeDropDown()},this.openDropDown=()=>{window.addEventListener("keyup",this.allowEscClose),window.addEventListener("click",this.blurSubMenu),this.addLinksBlurListeners(),requestAnimationFrame(()=>{this.element.classList.remove("is-closed"),this.element.classList.add("is-open")})},this.closeDropDown=()=>{window.removeEventListener("keyup",this.allowEscClose),window.removeEventListener("click",this.blurSubMenu),this.removeLinksBlurListeners(),requestAnimationFrame(()=>{this.element.classList.add("is-closed"),this.element.classList.remove("is-open")})},this.allowEscClose=e=>{e.keyCode===27&&this.closeDropDown()}}connect(){this.element.addEventListener(c.util.ez_drop_down.close_drop_down,this.closeDropDown)}disconnect(){this.element.removeEventListener(c.util.ez_drop_down.close_drop_down,this.closeDropDown)}handleSubMenuClick(){this.element.classList.contains("is-open")?this.closeDropDown():this.openDropDown()}closeExploreMenuItems(){u("CloseSearchExploreSubMenus")}addLinksBlurListeners(){const e=this.element.querySelectorAll(".ez-drop-down__submenu-item a");e==null||e.forEach(s=>{this.closeSubMenuOnClick()&&s.addEventListener("click",this.closeDropDown)})}removeLinksBlurListeners(){const e=this.element.querySelectorAll(".ez-drop-down__submenu-item a");e==null||e.forEach(s=>{s.removeEventListener("click",this.closeDropDown)})}closeSubMenuOnClick(){return this.hasCloseOnLinkClickValue?this.closeOnLinkClickValue:!0}};a.values={closeOnLinkClick:Boolean};let l=a;class w extends o{open(e=null){var s;if((s=e==null?void 0:e.params)!=null&&s.id){const i=document.querySelector(`dialog#${e.params.id}`);i.showModal();const n=i.querySelector(".ez-modal");n==null||n.classList.remove("ez-modal")}}close(e){const s=e.currentTarget.closest(".dialog-modal");s.querySelector('[data-dialog-modal-target="content"]').contains(e.target)||s.close()}}const t=class t extends o{connect(){this.flagLoaded()}on(){this.elementTargets.forEach(e=>{e.classList.add(...this.nameClasses)})}off(){this.elementTargets.forEach(e=>{e.classList.remove(...this.nameClasses)})}};t.classes=["name"],t.targets=["element"];let r=t;m([["button",L],["ez-drop-down",l],["ez-form-select",h],["ez-modal",p],["dialog-modal",w],["toggle-class",r]]);
