var $=Object.defineProperty;var j=(c,e,t)=>e in c?$(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var l=(c,e,t)=>j(c,typeof e!="symbol"?e+"":e,t);import{_ as y}from"./preload-helper-cYIQMxwj-1.js";import{C as W,r as Q}from"./stimulus-helpers-d189GC1Y-1.js";import{E as S}from"./ez-base-controller-CGJ-YSBe-1.js";import{sendTrackingEvent as f,trackCompleteEvent as J,pushDataLayerProperties as Z}from"./tracking-CTgR2pnh-1.js";import{aR as F,J as K,j as X,as as Y}from"./actions-Djic5EED-1.js";import{q as E,V as ee,W as te,a as re,n as A,j as m,t as ie,D as oe,F as R}from"./helpers-Dn-NBgOc-1.js";import{a as B}from"./search-helpers-DeJ2u5e--1.js";import{c as k,a as H}from"./ajax-helpers-EzPMNIcq-1.js";import{d as z}from"./partner-popup-helpers-1V59VRU2-1.js";import{a as se}from"./js-Cz0CWeBA-1.js";import{l as M,h as q,m as L}from"./ez-custom-events-C2ZPNiPb-1.js";import{s as ae}from"./performance-helpers-DpsuwFL7-1.js";import ne from"./init-user-c_pBoS7M-1.js";import{M as O}from"./media-matcher-vK8K0PVe-1.js";import{i as ce}from"./tooltips-f4Rf20ab-1.js";import"./index-C4xxlH8f-1.js";import"./_commonjsHelpers-BosuxZz1-1.js";import"./modal_helpers-CSZX3aEY-1.js";import"https://unpkg.com/comlink/dist/esm/comlink.mjs";const g=class g extends S{constructor(){super(...arguments),this.gridObserver=null,this.initGrid=(e=null)=>{if(this.element.classList.contains("ez-resource-grid--partner"))return;(this.element.dataset.instantGrid!=="true"||this.element.dataset.instantGrid==="true"&&e)&&window.ezResourceGrid({gridSelector:this.element,options:{rowHeight:parseInt(this.element.getAttribute("data-row-height"),10),maxRows:parseInt(this.element.getAttribute("data-max-rows"),10),truncate:!!this.element.getAttribute("data-truncate-results")}}),this.element.querySelectorAll(".ez-resource-grid__item").forEach((i,o)=>{i.setAttribute("data-position",`${o+1}`),E("thumb_preview_transition")&&this.addPrefetchHoverIntent(i)}),Array.from(document.querySelectorAll("link[rel=preload][as=image]")).map(i=>i.getAttribute("href")).forEach(i=>{const o=this.element.querySelector(`img[src="${i}"]`);o&&(o.removeAttribute("loading"),o.removeAttribute("decoding"),o.setAttribute("fetchpriority","high"))})},this.trackResourceClick=e=>{e.currentTarget.classList.add("is-clicked"),e.currentTarget.addEventListener("mouseout",o=>{o.currentTarget.classList.remove("is-clicked")},{once:!0});const t=e.currentTarget.closest(".ez-resource-thumb"),r=t.dataset.pro==="true"?"Pro":"Free",i={action:F,label:r,content_type:`Content-${e.currentTarget.dataset.contentType}`};this.element.dataset.gridPage&&(i.value=this.gridItemIndex(t)),f({element:e.currentTarget,data:i}),r==="Free"&&z({searchTerm:this.searchTerm||se.get("most_recent_search")})},this.trackProClick=e=>{f({element:e.currentTarget,data:{action:K,category:"Grid"}}),J({action:X,category:"Grid"})},this.trackResourceRightClick=e=>{const t=e.target.closest(".ez-resource-thumb");if(!t)return;(t.dataset.pro==="true"?"Pro":"Free")==="Free"&&z({display:!1})},this.nopeResource=e=>{e.preventDefault(),e.stopImmediatePropagation(),k("/admin/search/search_term_options/exclude",this.afterSearchTweak,()=>{},this.stoParams(this.parseResourceId(e)))},this.excludeTerm=e=>{e.preventDefault(),e.stopImmediatePropagation();const t=prompt("enter term to exclude"),r={term:this.searchTerm,locale:this.locale,content_type:this.contentType,excluded_term:t};k("/admin/search/search_term_options/exclude_term",this.afterSearchTweak,()=>{},r)},this.stoParams=e=>({term:this.searchTerm,locale:this.locale,content_type:this.contentType,resource_id:e}),this.afterSearchTweak=()=>{window.EezyScrollPositionHelper.preservePositionOnce(),window.Turbo.visit(window.location.href)}}get shouldTrackTruncation(){return this.hasTrackTruncationValue&&this.trackTruncationValue}connect(){this.initGrid(),window.addEventListener(M,this.initGrid),this.insertExcludeTermButton(),this.shouldTrackTruncation&&this.trackResourceTruncation(),this.element.addEventListener("contextmenu",this.trackResourceRightClick)}disconnect(){window.removeEventListener(M,this.initGrid),this.element.removeEventListener("contextmenu",this.trackResourceRightClick),E("thumb_preview_transition")&&this.removePrefetchHoverIntent(),this.gridObserver&&this.gridObserver.disconnect()}trackResourceTruncation(){if(!this.hasGridItemTarget)return;const e=this.gridItemTargets.length,t=this.gridItemTargets.filter(i=>i.style.display==="none").length,r=te(t,e);Z({search_results_percent_hidden:r})}gridItemIndex(e){const t=parseInt(e.dataset.position,10),r=parseInt(this.element.dataset.gridPage,10),i=parseInt(this.element.dataset.perPageTotal,10);return r?(r-1)*i+t:null}insertExcludeTermButton(){if(!B())return;const e=document.querySelectorAll(".ez-resource-grid")[0],t=document.createElement("a"),r=document.createTextNode("exclude term");t.appendChild(r),t.dataset.action="click->resources-grid#excludeTerm",t.href="#",e.appendChild(t)}addPrefetchHoverIntent(e){const t=e.querySelector('[data-controller="ez-hover-intent"]');t==null||t.addEventListener(q,this.prefetchResourceAssets)}removePrefetchHoverIntent(){this.element.querySelectorAll(".ez-resource-grid__item").forEach(t=>{const r=t.querySelector('[data-controller="ez-hover-intent"]');r==null||r.removeEventListener(q,this.prefetchResourceAssets)})}prefetchResourceAssets(e){const{currentTarget:t}=e,r=JSON.parse(t.dataset.previewsSrcs||"[]"),i=this.contentType==="video"?"video":"image";r!=null&&r.length&&r.forEach(o=>{ee({src:o,asAttr:i,linkClass:"modal-show-prefetch"})})}get searchTerm(){const e=document.querySelector("[data-search-term]");return e?e.getAttribute("data-search-term"):""}get locale(){return document.documentElement.getAttribute("lang")}get contentType(){return document.querySelector(".ez-search-form__input").getAttribute("data-content-type")}parseResourceId(e){return e.target.parentNode.parentNode.dataset.itemId}};g.values={trackTruncation:Boolean},g.targets=["gridItem"];let w=g;const le=(c="")=>`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 30 22" role="img" class="${c}"><g clip-path="url(#a)"><rect width="28" height="20" x="1" y="1" fill="#fff" rx="10"></rect><rect width="28" height="20" x="1" y="1" fill="url(#b)" rx="10"></rect><rect width="28" height="20" x="1" y="1" fill="url(#c)" rx="10"></rect><rect width="28" height="20" x="1" y="1" fill="url(#d)" rx="10"></rect><rect width="28" height="20" x="1" y="1" fill="url(#e)" rx="10"></rect><g filter="url(#f)"><path fill="#fff" d="M10.9933 15.5H9.3058l3.0724-8.7273h1.9517L17.4066 15.5h-1.6875l-2.331-6.9375H13.32L10.9933 15.5Zm.0554-3.4219h4.6022v1.2699h-4.6022v-1.2699Zm9.0884-5.3054V15.5h-1.581V6.7727h1.581Z"></path></g><rect width="27" height="19" x="1.5" y="1.5" stroke="#fff" stroke-opacity=".5" rx="9.5"></rect></g><rect width="29" height="21" x=".5" y=".5" stroke="#000" stroke-opacity=".2" rx="10.5"></rect><defs><radialGradient id="b" cx="0" cy="0" r="1" gradientTransform="rotate(-144.462 18.9402 6.1978) scale(25.807 23.1851)" gradientUnits="userSpaceOnUse"><stop stop-color="#3E74FF"></stop><stop offset="1" stop-color="#3E74FF" stop-opacity="0"></stop></radialGradient><radialGradient id="c" cx="0" cy="0" r="1" gradientTransform="matrix(-19.83329 14.1668 -13.40102 -18.7612 29 1.4167)" gradientUnits="userSpaceOnUse"><stop stop-color="#F846C2"></stop><stop offset="1" stop-color="#F846C2" stop-opacity="0"></stop></radialGradient><radialGradient id="d" cx="0" cy="0" r="1" gradientTransform="matrix(21.00001 15.00002 -14.1892 19.86486 1 1)" gradientUnits="userSpaceOnUse"><stop stop-color="#FF9052"></stop><stop offset="1" stop-color="#FF9052" stop-opacity="0"></stop></radialGradient><radialGradient id="e" cx="0" cy="0" r="1" gradientTransform="matrix(17.18588 -12.27564 11.6121 16.25693 .1474 24.9423)" gradientUnits="userSpaceOnUse"><stop stop-color="#32B8CE"></stop><stop offset="1" stop-color="#32B8CE" stop-opacity="0"></stop></radialGradient><clipPath id="a"><rect width="28" height="20" x="1" y="1" fill="#fff" rx="10"></rect></clipPath><filter id="f" width="14.8313" height="12.7273" x="7.3058" y="4.7727" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="1"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_56_700"></feBlend><feBlend in="SourceGraphic" in2="effect1_dropShadow_56_700" result="shape"></feBlend></filter></defs></svg>`,b=class b extends S{constructor(){super(...arguments),this.addEditableLabels=()=>{this._decorateGridItem({elem:this.element,conditional:this._addEditableLabels(),effect:e=>{const t=e.querySelector(".ez-resource-thumb__label-wrap"),r=`
          <div class="ez-resource-thumb__label-wrap__editable-label">${this.editableLabelValue}</div>`;this._appendHTML(t,r)}})},this.addFreeLabels=()=>{this._decorateGridItem({elem:this.element,conditional:this._addFreeLabels(),effect:e=>{const t=e.querySelector(".ez-resource-thumb__label-wrap"),r=`
          <div class="ez-resource-thumb__label-wrap__free-label">${this.freeLabelValue}</div>`;this._appendHTML(t,r)}})},this.addAiLabels=()=>{const e="ez-resource-thumb__label-wrap__ai-label",t=le(e);this._decorateGridItem({elem:this.element,conditional:this._addAiLabels(e),effect:r=>{const i=r.querySelector(".ez-resource-thumb__label-wrap");this._appendHTML(i,t)}})},this.insertSearchDeboostingButtons=()=>{if(!this.hasLinkTarget)return;const e=`
      <div class="ez-resource-thumb__link__admin ez-resource-thumb__link__admin--nope"
            data-action="click->resources-grid#nopeResource">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.83 18.83">
          <path d="M18.83 2.83L16 0 9.41 6.59 2.83 0 0 2.83l6.59 6.58L0 16l2.83 2.83 6.58-6.59L16 18.83 18.83 16l-6.59-6.59 6.59-6.58z"/>
        </svg>
      </div>
    `;this._decorateGridItem({elem:this.linkTarget,conditional:this._insertSearchDeboostingButtons(),effect:t=>{this._appendHTML(t,e)}})},this.addRemoveFromCollectionAction=()=>{const e=this.element.closest(".ez-resource-grid"),t=e==null?void 0:e.querySelector("#removeFromCollectionTemplate"),r=this.element.querySelector(".ez-resource-thumb__hover-state");this._decorateGridItem({elem:this.element,conditional:this._addRemoveFromCollectionAction()&&!!t&&!!r,effect:i=>{this._injectRemoveButton(i,t,r)}})},this.addCollectionDragHandle=()=>{const e=`
      <div class="ez-resource-thumb__grab__wrapper is-hidden" draggable="true">
        <svg viewBox="0 0 9.8 14" xmlns="http://www.w3.org/2000/svg">
          <g opacity=".74"><circle cx="1.5" cy="1.5" r="1.5"/>
          <circle cx="1.5" cy="7" r="1.5"/><circle cx="1.5" cy="12.5" r="1.5"/>
          <circle cx="8.3" cy="1.5" r="1.5"/><circle cx="8.3" cy="7" r="1.5"/>
          <circle cx="8.3" cy="12.5" r="1.5"/></g>
        </svg>
      </div>
    `;this._decorateGridItem({elem:this.element,conditional:this.element.hasAttribute("data-collection-item-id"),effect:t=>{this._appendHTML(t,e)}})},this._decorateGridItem=({elem:e,conditional:t,effect:r})=>{t&&e&&r(e)}}connect(){this.contentType=document.body.dataset.conversionsContentType||re(),ae(["addFreeLabels","addAiLabels","addEditableLabels","insertSearchDeboostingButtons","addRemoveFromCollectionAction","addCollectionDragHandle"],this)}hoverThumb({currentTarget:e,params:t}){document.body.classList.contains("is-mobile")&&A()||this._decorateGridItem({elem:e,conditional:this._showHoverOverlay(e),effect:r=>{const{userId:i,userDisplayName:o,avatarSrc:s,uploadsPath:a,contentType:n,itemPro:u,imageSrc:h,pinterestUrl:v,title:_,resourceId:G}=t;let T=document.querySelector('[data-grid-item-decorator-target="hoverTemplate"]').innerHTML.trim();T=m(T,{user_id:i,user_display_name:o,contributor_avatar_src:s,contributor_uploads_path:a,content_type:n,item_pro:u,image_src:h,pinterest_url:v,title:_,id:G,url:a,src:s});const N=r.querySelector(".ez-resource-thumb__hover-state");requestAnimationFrame(()=>{if(N.insertAdjacentHTML("beforeend",T),s){const U={src:s},D=r.querySelector('[data-template="avatar-template"]').innerHTML.trim(),P=r.querySelector(".ez-avatar");requestAnimationFrame(()=>{P.classList.remove("ez-avatar--missing"),P.innerHTML=m(D,U)})}ie(L)})}})}_appendHTML(e,t){e&&requestAnimationFrame(()=>{e.insertAdjacentHTML("beforeend",t)})}_injectRemoveButton(e,t,r){const{collectionItemId:i,pro:o}=e.dataset,s=e.querySelector(".ez-resource-thumb__link"),{contentType:a}=s.dataset;if(!i)return;let n=t.innerHTML.trim();n=m(n,{item_id:i,content_type:`Content-${a}`,item_pro:o?"Pro":"Free"}),requestAnimationFrame(()=>{r.insertAdjacentHTML("beforeend",n)})}_tallResource(e){const t=parseFloat(e.closest("[data-tall-resource-breakpoint]").getAttribute("data-tall-resource-breakpoint")),r=parseFloat(e.dataset.w);return parseFloat(e.dataset.h)/r>=t}_showHoverOverlay(e){return!(this._tallResource(e)||document.body.classList.contains("is-mobile")&&A())}_addAiLabels(e){return!(this.element.querySelector(`.${e}`)||!this.hasAiLabelValue)}_addEditableLabels(){if(this.element.querySelector(".ez-resource-thumb__label-wrap__editable-label")||!this.hasEditableLabelValue)return!1;const i=["vector"].includes(this.contentType);return oe()&&i}_addFreeLabels(){if(this.element.querySelector(".ez-resource-thumb__label-wrap__free-label")||!this.hasFreeLabelValue)return!1;const r=!ne.isPro,i=!R(this.element.dataset.pro);return r&&i}_insertSearchDeboostingButtons(){return this.element.querySelector(".ez-resource-thumb__link__admin--nope")?!1:this.element.closest(".ez-search-results")&&B()}_addRemoveFromCollectionAction(){return!this.element.querySelector(".ez-resource-thumb__remove")}};b.targets=["link"],b.values={freeLabel:String,editableLabel:String,aiLabel:String};let I=b;const d=new O,C=class C extends S{constructor(){super(...arguments),this.setNewThumbnailInfo=()=>{this.setupContribInfoTooltips()},this.reinitializeContribTooltips=()=>{this.tooltipsInitialized=!1,d.addMediaQuery("(min-width: 1024px)",this.initTooltips),d.evaluateAll(),d.addListeners()},this.initTooltips=()=>{if(!this.tooltipsInitialized){const e=this.element.querySelectorAll('.resource-action-button[data-ez-tooltip="true"]:not(.is-tipped)');e.length&&ce(e);const t=this,r=this.element.querySelectorAll('[data-resources-grid-target="nameTarget"]:not(.is-tipped)'),i='<div class="ez-spinner ez-spinner--sm ez-spinner--color-mono"></div>';y(()=>import("./tippy-CMjLIZZA-1.js"),[],import.meta.url).then(o=>{const s=o.default;s(r,{content:i,allowHTML:!0,animation:"rising",interactive:!0,appendTo:document.body,placement:"bottom-start",theme:"contrib-info",delay:[250,null],duration:0,onCreate(a){a.popper.classList.add("contributor-info-tooltip")},onShow(a){t.tippyInstance=a,t.showTooltip(),a.popper.addEventListener("mouseleave",t.stopPreviewVideo)},onHide(a){t.tippyInstance=a,t.hideTooltip(),a.popper.removeEventListener("mouseleave",t.stopPreviewVideo)}}),this.tooltipsInitialized=!0}),r.forEach(o=>{o.classList.add("is-tipped")})}},this.stopPreviewVideo=e=>{const t=this.getParentLi(this.tippyInstance.reference);e.relatedTarget&&!this.newTargetIsPreview(e.relatedTarget)&&t.classList.remove("is-playing")},this.injectTooltipContent=()=>{if(this.contributorsInfo||this.pageGrids.length>1){clearInterval(this.contributorsInfoPolling);const e=this.contribInfoTemplateTarget.innerHTML,t=this.parseTemplateForContributor(e);setTimeout(()=>{this.initTooltipContent(t)},0)}},this.clickThroughToProfile=e=>{this.trackContributorClick(e)}}connect(){this.hasContribInfoTemplateTarget&&this.contributorsIds.length&&this.setupMediaQueries(),this.hasContribThumbnailsTarget&&this.setupFollowingThumbnails(),d.evaluateAll(),d.addListeners(),window.addEventListener(L,this.reinitializeContribTooltips)}disconnect(){d.removeListeners(),d.clearQueries(),window.removeEventListener(L,this.reinitializeContribTooltips)}setupContribInfoTooltips(){this.pageGrids=document.querySelectorAll('[data-controller~="resources-grid"]:not(.ez-resource-grid--partner)');const e=document.querySelector(".ez-page-wrapper");this.contributorsIds&&((!this.hasIdCollectionTarget||this.idCollectionTarget.dataset.featuredGrid==="0")&&H("/async_contributors_info",t=>{this.contributorsInfo=t.data;const r=e?JSON.parse(e.getAttribute("data-contributors-info")):{},i={...t.data,...r};this.pageGrids.length>=1&&e&&e.setAttribute("data-contributors-info",JSON.stringify(i))},t=>{console.error(t)},{params:{contributor_ids:this.contributorsIds,preview_count:3}}),this.reinitializeContribTooltips())}setupFollowingThumbnails(){H("/async_contributors_info",e=>{this.contributorsInfo=e.data,this.gatherfollowedUsers().forEach(t=>{const r=document.querySelector(`[data-user-id="${t}"] [data-thumbnail-contributor-info-target="previewsWrap"]`),i=this.contributorsInfo[t].previews;let o="";i.forEach(s=>{const{thumb_src:a,thumb_src_2x:n,resource_path:u,resource_title:h,content_type:v,pro:_}=s;o+=this.makePreviewThumbHTML(a,n,u,h,v,_)}),r.innerHTML=o})},e=>{console.error(e)},{params:{contributor_ids:this.gatherfollowedUsers(),preview_count:3,sort:"recent"}})}get contributorsIds(){return this.hasContribInfoTemplateTarget?JSON.parse(this.contribInfoTemplateTarget.dataset.userIds):null}gatherfollowedUsers(){const e=[];return this.contribThumbnailsTargets.forEach(t=>{e.push(t.dataset.userId)}),e}showTooltip(){this.contributorsInfoPolling=setInterval(this.injectTooltipContent,100),this.injectTooltipContent()}hideTooltip(){clearInterval(this.contributorsInfoPolling),this.getParentLi(this.tippyInstance.reference).classList.remove("is-hovered")}newTargetIsPreview(e){return!(!e.hasAttribute("data-video-preview-target")||e.getAttribute("data-video-preview-target")!=="videoWrap")}initTooltipContent(e){const t=this.getTooltipContent(this.tippyInstance.popper),r=this.getParentLi(this.tippyInstance.reference);t.innerHTML=e,this.fixAvatar(),this.loadPreviewThumbs(),this.hideCountIfNull(),r.classList.add("is-hovered")}parseTemplateForContributor(e){const t=this.contributorInfoById;return t.url=t.contributor_uploads_path,t.src=t.contributor_avatar_src,m(e,t)}fixAvatar(){const e=this.getTooltipContent(this.tippyInstance.popper),t=e.querySelector(".ez-avatar"),r=e.querySelector('[data-thumbnail-contributor-info-target="avatarTemplate"]');this.contributorInfoById.contributor_avatar_src&&(t.classList.remove("ez-avatar--missing"),t.innerHTML=r.innerHTML)}hideCountIfNull(){const t=this.getTooltipContent(this.tippyInstance.popper).querySelector(".contributor-details__contributor__count");this.contributorInfoById.contributor_resource_count||t.classList.add("is-hidden")}loadPreviewThumbs(){const e=this.contributorInfoById.previews,t=this.tippyInstance.popper.querySelector('[data-thumbnail-contributor-info-target="previewsWrap"]');let r="";e.forEach(i=>{const{thumb_src:o,thumb_src_2x:s,resource_path:a,resource_title:n,pro:u,content_type:h}=i;r+=this.makePreviewThumbHTML(o,s,a,n,h,u)}),t.innerHTML=r}makePreviewThumbHTML(e,t,r,i,o,s){return`<a href="${r}"
               class="ez-resource-grid__item__contrib-info__uploads__thumb"
               data-content-type="${o}"
               data-pro="${s}"
               data-action="click->thumbnail-contributor-info#trackResourceClick">
              <img src="${e}"
                   srcset="${t} 2x, ${e} 1x" alt="${i}"></a>
              `}get contributorInfoById(){var o;const e=document.querySelector(".ez-page-wrapper"),t=e&&e.hasAttribute("data-contributors-info")?JSON.parse(e.getAttribute("data-contributors-info")):{},r=this.tippyInstance.reference.getAttribute("data-user-id");if((o=this.contributorsInfo)!=null&&o[r]&&t[r]){const s=t[r].contributor_uploads_path;this.contributorsInfo[r]=t[r],this.contributorsInfo[r].url=s}return{...t,...this.contributorsInfo||{}}[r]}getParentLi(e){return e.closest(".ez-resource-thumb")}trackContributorClick(e){f({element:e.target||e.currentTarget,data:{action:Y}})}trackResourceClick(e){const{contentType:t,pro:r}=e.target.dataset;f({element:e.target,data:{action:F,label:R(r)?"Pro":"Free",content_type:`Content-${t}`}})}getTooltipHeader(e){return e.querySelector(".tippy-box[data-theme=contrib-info] .contributor-details__contributor")}getTooltipContent(e){return e.querySelector(".tippy-content")}setupMediaQueries(){d.addMediaQuery("(min-width: 1024px)",()=>{this.contributorsIds.length&&this.setupContribInfoTooltips()})}};C.targets=["contribInfoTemplate","contribThumbnails","idCollection","avatarTemplate"];let x=C;const p=new O;class V extends W{constructor(){super(...arguments);l(this,"videoSelector",'[data-video-preview-target*="preview"]');l(this,"addPreviewEvents",()=>{this.previewTargets.forEach(t=>{t.addEventListener("mouseenter",this.playVideo,!1),t.addEventListener("mouseleave",this.maybePauseVideo,!1)})});l(this,"removePreviewEvents",()=>{this.previewTargets.forEach(t=>{t.removeEventListener("mouseenter",this.playVideo),t.removeEventListener("mouseleave",this.maybePauseVideo)})});l(this,"pauseHiddenVideos",t=>{this.element.querySelectorAll("video").forEach(i=>{i!==t.target&&this.pauseVideo(i,!0)})});l(this,"playVideo",t=>{t.stopPropagation();const r=t.currentTarget;r.querySelector("video")||this.addVideoToDOM(r),this.videoPlayIntent=setTimeout(()=>{const i=r.querySelector("video"),o=i.play();o!==void 0&&o.then(()=>{i.loop=!0,i.readyState>=3&&r.classList.add("is-playing")})},150)});l(this,"maybePauseVideo",t=>{clearTimeout(this.videoPlayIntent);const r=t.currentTarget.querySelector("video");r&&!r.closest(this.videoSelector).classList.contains("is-hovered")&&this.pauseVideo(r,!0)})}connect(){if(!this.hasPreviewTarget)return!1;this.setupPreviewMediaQueries(),document.addEventListener("play",this.pauseHiddenVideos,!0),p.evaluateAll(),p.addListeners()}disconnect(){this.removeListeners(),p.removeListeners(),p.clearQueries()}removeListeners(){document.removeEventListener("play",this.pauseHiddenVideos),this.removePreviewEvents()}addVideoToDOM(t){const{videoUrl:r}=t.dataset,i=`<div class="video-wrapper">
                        <video autoplay="true" preload="none" muted playsinline>
                          <source src="${r}" type="video/mp4">
                        </video>
                      </div>`;t.querySelector('[data-video-preview-target*="videoWrap"]').insertAdjacentHTML("beforeend",i)}isPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}pauseVideo(t,r=!1){if(t&&this.isPlaying(t)){t.closest(this.videoSelector).classList.remove("is-playing"),t.pause();const i=t.querySelector("source"),o=i.src;i.src="",i.removeAttribute("src"),t.load(),i.src=o,t.pause(),r&&(t.currentTime=0)}}setupPreviewMediaQueries(){p.addMediaQuery("(min-width: 1024px)",()=>{this.addPreviewEvents()},()=>{this.removePreviewEvents()})}}l(V,"targets",["preview"]);Q([["grid-item-decorator",I],["resources-grid",w],["thumbnail-contributor-info",x],["video-preview",V],["pinterest-share",y(()=>import("./pinterest-share-controller-Dwl7r7K6-1.js"),[],import.meta.url)],["ez-hover-intent",y(()=>import("./ez-hover-intent-controller-oXmHHq45-1.js"),[],import.meta.url)]]);
