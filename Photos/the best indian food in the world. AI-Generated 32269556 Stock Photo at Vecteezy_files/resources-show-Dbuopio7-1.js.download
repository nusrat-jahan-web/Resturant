import{r as h}from"./stimulus-helpers-d189GC1Y-1.js";import{E as p}from"./ez-base-controller-CGJ-YSBe-1.js";import{a as g,t as u}from"./helpers-Dn-NBgOc-1.js";import{sendTrackingEvent as c}from"./tracking-CTgR2pnh-1.js";import{as as f,at as L}from"./actions-Djic5EED-1.js";import{c as T,d as C}from"./sessions-manager-DFyItLsb-1.js";import{i as S}from"./tooltips-f4Rf20ab-1.js";import{g as k}from"./resource-show-helpers-BCUGkw7K-1.js";import{i as v}from"./ajax-helpers-EzPMNIcq-1.js";import{e as w}from"./events-BT2vjsWp-1.js";import{B as b,D as z}from"./dunning-tracking-controller-Dwb3vBV6-1.js";import{E as B}from"./modal-controller-DosV-HSM-1.js";import"./performance-helpers-DpsuwFL7-1.js";import"./js-Cz0CWeBA-1.js";import"./init-user-c_pBoS7M-1.js";import"./preload-helper-cYIQMxwj-1.js";import"./index-C4xxlH8f-1.js";import"./_commonjsHelpers-BosuxZz1-1.js";import"./modal_helpers-CSZX3aEY-1.js";import"https://unpkg.com/comlink/dist/esm/comlink.mjs";import"./transaction-form-controller-BntOgmIM-1.js";import"./form-controller-VdBoQO3j-1.js";import"./rails-ujs-CTRE4yuG-1.js";import"./error-helpers-BW0ThaDX-1.js";import"./validation-helpers-DCLJWSZ_-1.js";import"./animated-label-DAGtLbFO-1.js";import"./button-helpers-CvZG-X-W-1.js";import"./tax-constants-9Y5pRf_i-1.js";import"./_commonjs-dynamic-modules-TDtrdbi3-1.js";import"./plan-helpers-BFxqJo3H-1.js";import"./ez-custom-events-C2ZPNiPb-1.js";const n=class n extends p{constructor(){super(...arguments),this.contributorClick=e=>{this.trackContributorClick(e)}}connect(){T(this.element.dataset.resourceId),C("most_recent_resource_id",this.element.dataset.resourceId),document.querySelector('[data-ez-tooltip="true"]')&&S()}trackContributorClick(e){c({element:e.target,data:{action:f}})}trackLicenseClick(e){c({element:e.target,data:{action:L,category:"Show",label:k(),content_type:`Content-${g()}`}})}updateSelectedLicense(e){e.target.id==="free-license"?this.showFreeHidePro():this.showProHideFree()}showFreeAttributionSlidedown({detail:{licenseType:e,resourceId:i}}){if(e==="free"){const s=document.querySelector('[data-controller="free-attribution-slidedown"]'),r=document.querySelector(".ez-session-modal__download-limit");if(s||r)return;const l=document.querySelector(".ez-page-wrapper__content");v({url:`/resources/${i}/show_free_attr_slidedown`,destElem:l,destPos:"afterbegin",successCb:()=>{setTimeout(()=>{u(w.show_page.reveal_free_attribution_slidedown)},100)},errorCb:t=>{console.error(t)}})}}showFreeHidePro(){this.proLicenseTarget.removeAttribute("checked"),this.freeLicenseTarget.setAttribute("checked","checked"),this.downloadBtnTarget.firstElementChild.classList.add("is-hidden"),this.downloadBtnTarget.lastElementChild.classList.remove("is-hidden"),this.attributionBlockTarget.firstElementChild.classList.add("is-hidden"),this.attributionBlockTarget.lastElementChild.classList.remove("is-hidden"),this.photoSizeBtnTarget&&(this.photoSizeBtnTarget.classList.add("license-free"),this.photoSizeBtnTarget.classList.remove("license-pro"),this.proLicenseDlSizesTarget.classList.add("is-hidden"),this.freeLicenseDlSizesTarget.classList.remove("is-hidden"))}showProHideFree(){this.freeLicenseTarget.removeAttribute("checked"),this.proLicenseTarget.setAttribute("checked","checked"),this.downloadBtnTarget.lastElementChild.classList.add("is-hidden"),this.downloadBtnTarget.firstElementChild.classList.remove("is-hidden"),this.attributionBlockTarget.lastElementChild.classList.add("is-hidden"),this.attributionBlockTarget.firstElementChild.classList.remove("is-hidden"),this.photoSizeBtnTarget&&(this.photoSizeBtnTarget.classList.add("license-pro"),this.photoSizeBtnTarget.classList.remove("license-free"),this.freeLicenseDlSizesTarget.classList.add("is-hidden"),this.proLicenseDlSizesTarget.classList.remove("is-hidden"))}};n.targets=["resource","sidebar","downloadBtn","attributionBlock","proLicense","freeLicense","photoSizeBtn","proLicenseDlSizes","freeLicenseDlSizes"];let o=n;const d=class d extends B{displayMetaForIntegration(e){var t;const s=e.target.closest(".ez-form-select-field").querySelector('[data-ez-form-select-target="valueField"]');(t=this.metadataWrapperTargets)==null||t.forEach(m=>{m.classList.add("is-hidden")});const r=s.value;this.element.querySelector(`#metadata_for_integration_${r}`).classList.remove("is-hidden")}};d.targets=["metadataWrapper"];let a=d;h([["billing-info-modal",b],["dunning-tracking",z],["resource-show-main",o],["integrations-export-modal",a]]);
